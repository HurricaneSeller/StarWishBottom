<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="./styles/SignUp.css">
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
    <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui-js"></script>
    <link href="./styles/animation/animate.css" rel="stylesheet"/>
    <link href="./styles/animation/waypoints.css" rel="stylesheet"/>
    <script src="./js/jquery.waypoints.min.js" type="text/javascript"></script>
    <script src="./js/waypoints.js" type="text/javascript"></script>
  </head>
  <body>
    <!-- <script src="./network/client.js" type="text/javascript"></script> -->
    <div class="signup-form">
<<<<<<< HEAD
      <form action=" http://139.196.161.120:3000/users/reg" method="post">
=======
      <!-- <form class="" action="http://139.196.161.120:3000/users/reg" method="post"> -->
>>>>>>> 6f43451613eb0629d84d5ba68e0bb3f244d50085
        <section class="os-animation" data-os-animation="bounceInUp" data-os-animation-delay="0s">
          <h1>Sign Up</h1>
        </section>
        <section class="os-animation" data-os-animation="bounceInUp" data-os-animation-delay=".1s">
          <input type="text" placeholder="Full Name" class="txtb" id="input_name" name="name">
        </section>
        <section class="os-animation" data-os-animation="bounceInUp" data-os-animation-delay=".2s">
          <input type="email" placeholder="Email" class="txtb" id="input_email" name="email">
        </section>
        <section class="os-animation" data-os-animation="bounceInUp" data-os-animation-delay=".3s">
          <input type="password" placeholder="Password" class="txtb" id="input_password" name="password">
        </section>
        <section class="os-animation" data-os-animation="bounceInUp" data-os-animation-delay=".4s">
          <input type="submit" value="Create Account" class="signup-btn" onclick="onClickSubmit()">
          <script type="text/javascript">
              const baseUrl = 'http://139.196.161.120:3000';
              function post(url, data, callback) {
                  var request = new XMLHttpRequest();
                  request.open("POST", baseUrl + url, true );
                  request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
                  request.send(data);
                  request.onload = () => {
                      callback(request.response);
                  }
              }
              function getUserId(response) {
                let json = JSON.parse(response);
                if (json.code !== "200") {
                  alert(json.data.msg);
                  return;
                }
                window.location.href = "./WishPool-Main.html?user_id=" + json.data.user_id;
              }
              function onClickSubmit(){
                let name = $("#input_name").val();
                let email = $("#input_email").val();
                let password = $("#input_password").val();
                if (!name || !email || !password) {
                  alert("不能为空");
                  return;
                }
                post("/users/reg", 'name=' + name + '&email=' + email + '&password=' + password, getUserId);
              }
          </script>
        </section>
        <a href="./SignIn.html">Already Have one ?</a>
    </div>
  </body>
</html>
